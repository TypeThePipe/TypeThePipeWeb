<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">
  <meta name="robots" content="index,follow">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Carlos Vecina">

  
  
  
    
  
  <meta name="description" content="With the power of GPT and Whisper models, you can create a virtual assistant that is tailored to your needs. Reading this article, you&#39;ll learn how to record and transcribe audio, translate text, generate responses with GPT, and play responses out loud using text-to-speech synthesis.">

  
  <link rel="alternate" hreflang="en-us" href="/post/gpt-whisper-build-your-own-voice-assistant/">

  


  
  
  
  <meta name="theme-color" content="#0294A5">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155621946-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-155621946-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu7deb2a6bfe7da9ae71f9387d98d158da_12352_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu7deb2a6bfe7da9ae71f9387d98d158da_12352_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/gpt-whisper-build-your-own-voice-assistant/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="TypeThePipe">
  <meta property="og:url" content="/post/gpt-whisper-build-your-own-voice-assistant/">
  <meta property="og:title" content="Use GPT and Whisper to Build Your Own Voice Assistant | TypeThePipe">
  <meta property="og:description" content="With the power of GPT and Whisper models, you can create a virtual assistant that is tailored to your needs. Reading this article, you&#39;ll learn how to record and transcribe audio, translate text, generate responses with GPT, and play responses out loud using text-to-speech synthesis."><meta property="og:image" content="/post/gpt-whisper-build-your-own-voice-assistant/featured.png">
  <meta property="twitter:image" content="/post/gpt-whisper-build-your-own-voice-assistant/featured.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2023-03-23T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2023-03-23T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/gpt-whisper-build-your-own-voice-assistant/"
  },
  "headline": "Use GPT and Whisper to Build Your Own Voice Assistant",
  
  "image": [
    "/post/gpt-whisper-build-your-own-voice-assistant/featured.png"
  ],
  
  "datePublished": "2023-03-23T00:00:00Z",
  "dateModified": "2023-03-23T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Pablo CÃ¡novas"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "TypeThePipe",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/logo_hu404f0ea59597fa66f625b1ea06c896ea_259550_192x192_fit_lanczos_2.png"
    }
  },
  "description": "With the power of GPT and Whisper models, you can create a virtual assistant that is tailored to your needs. Reading this article, you'll learn how to record and transcribe audio, translate text, generate responses with GPT, and play responses out loud using text-to-speech synthesis."
}
</script>

  

  


  


  







  <title>Use GPT and Whisper to Build Your Own Voice Assistant | TypeThePipe</title>
  <script async defer src="https://tools.luckyorange.com/core/lo.js?site-id=10579286"></script>
  
  
<script>var ezoicId = 473828; </script>
<script type="text/javascript" src="//go.ezoic.net/ezoic/ezoic.js"></script>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  






  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu404f0ea59597fa66f625b1ea06c896ea_259550_0x70_resize_lanczos_2.png" alt="TypeThePipe"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu404f0ea59597fa66f625b1ea06c896ea_259550_0x70_resize_lanczos_2.png" alt="TypeThePipe"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#vizstips"><span>Vizs & Tips</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>About Us</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#mentorship"><span>Mentorship Program</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  


        <article class="article">
            





















  
  
    
  


<div class="article-container pt-3">
  <h1>Use GPT and Whisper to Build Your Own Voice Assistant</h1>

  
  <p class="page-subtitle">A step-by-step guide to building your own personal AI-powered voice assistant in python, with two tasty flavors: console and Streamlit!</p>
  

  


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span><a href="/authors/pablo-canovas/">Pablo CÃ¡novas</a></span>
  </div>
  
  

  

  

  

  
  
  

  
  
  
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/python/">Python</a>, <a href="/categories/post/">Post</a></span>
  

</div>

  














</div>





            <div class="article-container">
              <div class="article-style">
                
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<p><img src="featured.png" style="width:800px; height:700px" alt="Man talking to a machine. Build a chat bot with GPT" /></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>What a time to be alive, huh? The rise of AI is happening at a faster pace than ever and virtual assistants are quickly becoming a ubiquitous part of our digital lives. Remember Siri and Alexa? They were the jewel in the crown not that long ago and now they are biting the dust against the power of GPT models.</p>
<p>In this blog post, weâll show you how to build a virtual assistant using GPT and Whisper APIs. These powerful tools allow you to record user voice, transcribe or translate on-the-fly if necessary, and generate a response using OpenAIâs advanced natural language processing capabilities. Weâll take you through the steps of building the bot in two different flavors - an interactive console-based app and a browser-based version powered by Streamlit.</p>
</div>
<div id="setting-up-the-environment" class="section level1">
<h1>Setting up the environment</h1>
<p>Before you can start, you need to make sure you have the right tools and environment set up. I recommend to set up a virtual environment with <code>pipenv</code> so all dependencies are managed automatically from the Pipefile included in the <a href="https://github.com/PabloCanovas/chatgpt-whisper-streamlit-voice-assistant">Github repository</a>. Below are the steps you can follow to set up your environment:</p>
<div id="install-dependencies" class="section level3">
<h3>Install dependencies</h3>
<ul>
<li>Start by cloning the repository with <code>git clone https://github.com/PabloCanovas/chatgpt-whisper-streamlit-voice-assistant gpt_voice_assistant</code></li>
<li>If you donât have <code>pipenv</code> installed to manage dependencies, then go ahead: <code>pip install pipenv --user</code></li>
<li>Install the required libraries. You can install them just by going to the cloned directory: <code>cd gpt_voice_assistant</code> and by running: <code>pipenv install</code> which will install dependencies based on <code>Pipfile.lock</code> file.</li>
</ul>
</div>
<div id="set-up-your-openai-api-key" class="section level3">
<h3>Set up your OpenAI API key</h3>
<p>Manually manage the OpenAI api key is necessary. You will need to create a new file called <code>myapikeys.py</code> with this line inside: <code>OPENAI_KEY = "my-apikey-goes-here"</code>, and obviously use your key for that.</p>
</div>
<div id="define-your-helper-functions" class="section level3">
<h3>Define your helper functions</h3>
<p>Youâll need to define several helper functions that will be used throughout your program, including functions for recording, playing, and transcribing audio among others. Now, we are going to overview them all before showing the main program.</p>
</div>
</div>
<div id="recording-user-voice" class="section level1">
<h1>Recording user voice</h1>
<p>The first step in building your virtual assistant is to record the userâs voice. You can do this using the <code>record_audio_manual</code> function:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">def</span> record_audio_manual(filename, sr<span class="op">=</span><span class="dv">44100</span>):</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="bu">input</span>(<span class="st">&quot;  ** Press enter to start recording **&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    audio <span class="op">=</span> sd.rec(<span class="bu">int</span>(<span class="dv">10</span> <span class="op">*</span> sr), samplerate<span class="op">=</span>sr, channels<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="bu">input</span>(<span class="st">&quot;  ** Press enter to stop recording **&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    sd.stop()</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    write(filename, sr, audio)</span></code></pre></div>
<p>When you call the function, it will prompt the user to press enter to start and stop recording. Once the user stops recording, the audio is saved to the specified file using the <code>write</code> function from <code>scipy</code>. It records audio for a fixed maximum duration of 10 seconds by default. Change as needed.</p>
<p>Once you have the userâs voice recorded, you can move on to transcribing it using the Whisper API.</p>
</div>
<div id="transcribing-user-voice" class="section level1">
<h1>Transcribing user voice</h1>
<p>The next step is to transcribe the userâs voice into text. You can do this using the <code>transcribe_audio</code> function provided, which uses the Whisper API to transcribe the audio. Itâs surprisingly easy:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">def</span> transcribe_audio(filename):</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    audio_file <span class="op">=</span> <span class="bu">open</span>(filename, <span class="st">&quot;rb&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    transcript <span class="op">=</span> openai.Audio.transcribe(<span class="st">&quot;whisper-1&quot;</span>, audio_file)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    audio_file.close()</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="cf">return</span> transcript</span></code></pre></div>
<p>When you call the function, it reads the audio file into memory, calls the <code>openai.Audio.transcribe</code> function to transcribe the audio using the Whisper API, and returns the resulting transcript.</p>
<p>Also, if you wish to speak to your assistant in a language other than English, you can easily do so by calling the <code>translate_audio</code> function instead.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">def</span> translate_audio(filename):</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    audio_file <span class="op">=</span> <span class="bu">open</span>(filename, <span class="st">&quot;rb&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    translation <span class="op">=</span> openai.Audio.translate(<span class="st">&quot;whisper-1&quot;</span>, audio_file)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    audio_file.close()</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="cf">return</span> translation</span></code></pre></div>
<p>Once you have the userâs voice transcribed letâs send it to GPT.</p>
</div>
<div id="generating-a-response-with-gpt" class="section level1">
<h1>Generating a response with GPT</h1>
<p>The next step in building this cool assistant is to generate a response to the userâs input using GPT. You can do this using the OpenAI GPT API, which, as everybody already know, allows you to generate human-like text based on a given prompt. It really couldnât be much easier. Hereâs how:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>bot <span class="op">=</span> openai.ChatCompletion.create(model<span class="op">=</span><span class="st">&quot;gpt-3.5-turbo&quot;</span>, messages<span class="op">=</span>messages)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>response <span class="op">=</span> bot.choices[<span class="dv">0</span>].text</span></code></pre></div>
<p>The <code>openai.ChatCompletion.create</code> function takes two arguments: the name of the GPT model to use (in this case, âgpt-3.5-turboâ), and a list of messages exchanged between the user and the virtual assistant so far. This is important because GPT retains all the conversation context to answer the questions, being this a key aspect of why it works so well. When you call the function, it generates a response to the most recent message from the user, which you can access using the <code>bot.choices[0].text</code> attribute.</p>
</div>
<div id="playing-the-response-out-loud" class="section level1">
<h1>Playing the response out loud</h1>
<p>Once you have the response generated by GPT, you can play it out loud on the speakers using the <code>say</code> function provided in the code. Hereâs what it looks like:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> say(text):</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    p <span class="op">=</span> multiprocessing.Process(target<span class="op">=</span>pyttsx3.speak, args<span class="op">=</span>(text,))</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    p.start()</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="cf">while</span> p.is_alive():</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>        <span class="cf">if</span> keyboard.is_pressed(<span class="st">&#39;enter&#39;</span>):</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>            p.terminate()</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    p.join()</span></code></pre></div>
<p>This function uses the <code>pyttsx3</code> library I talked about in <a href="../post/python-text-to-speech-practical-guide">this other article</a> to generate a speech audio file from the text, and plays it out loud on the speakers using <code>multiprocessing</code>. The function also listens for the âenterâ key, and terminates the speech if it is pressed.</p>
<div id="the-importance-of-using-multiprocessing-for-efficient-audio-playback" class="section level2">
<h2>The importance of using multiprocessing for efficient audio playback</h2>
<p>If GPTâs response is particularly long, you might want a way to stop the playback mid-way through. This is where the multithreading capabilities of Python come in.</p>
<p>In Python, <code>multiprocessing</code> allows you to run multiple threads simultaneously, making it possible to perform several actions at the same time. In the <code>say</code> function, we use it to play the speech audio file and listen for user input at the same time.</p>
<p>By working this way, we can ensure that the speech doesnât block the main thread of the program. This means that even if the speech is too verbose or the user is no longer interested in the answer, he can still interact with the program and interrupt it if needed.</p>
</div>
</div>
<div id="building-a-console-based-program" class="section level1">
<h1>Building a console-based program</h1>
<p>Before going for a browser-based app, you may want to start by building an interactive console-based program that you can run on your local machine. This will allow you to quickly test and iterate on your virtual assistant without the need for a web server or browser.</p>
<p>Using the building blocks described above, hereâs how my assistant looks like:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> openai</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">import</span> myapikeys</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="im">from</span> text_speech_utils <span class="im">import</span> <span class="op">*</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>openai.api_key <span class="op">=</span> myapikeys.OPENAI_KEY</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>input_audio_filename <span class="op">=</span> <span class="st">&#39;input.wav&#39;</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>messages <span class="op">=</span> [{<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;You are a helpful assistant.&quot;</span>}]</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>        record_audio_manual(input_audio_filename)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>        transcription <span class="op">=</span> transcribe_audio(input_audio_filename)             <span class="co"># if we want to speak in another language we would use &#39;translate_audio&#39; function</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: transcription[<span class="st">&#39;text&#39;</span>]})</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="ch">\n</span><span class="ss">- Me: </span><span class="sc">{</span>transcription[<span class="st">&#39;text&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>        bot <span class="op">=</span> openai.ChatCompletion.create(model<span class="op">=</span><span class="st">&quot;gpt-3.5-turbo&quot;</span>, messages<span class="op">=</span>messages)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>        </span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>        response <span class="op">=</span> bot.choices[<span class="dv">0</span>].message.content</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;- ChatGPT: </span><span class="sc">{</span>response<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">***   Press enter to interrupt assistant and ask a new question   ***</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>        say(response)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>    main()</span></code></pre></div>
<p>In this example, we define the main loop of our program using a while loop that listens for user input. Inside the loop, we simply record, transcribe (or translate), send the text to openAI and playback the response.</p>
<p>And there you have it! In barely 50 lines of code we have built a fully functional voice assistant which can be used to learn about new topics, inspire yourself with new cooking recipes or plan detailed workouts that fit your own objectives.</p>
</div>
<div id="building-a-browser-based-app-with-streamlit" class="section level1">
<h1>Building a browser-based app with Streamlit</h1>
<p>In addition to the console-based program, you can also create an small web app with Streamlit. Streamlit is a Python library that allows you to build interactive web apps with just a few lines of code.</p>
<p>Hereâs a snapshot of what my small app looks like:</p>
<p><img src="streamlit_app.PNG" /></p>
<p>And this is the code that generates it:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> streamlit <span class="im">as</span> st</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="im">import</span> openai</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="im">import</span> myapikeys</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="im">from</span> text_speech_utils <span class="im">import</span> <span class="op">*</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>openai.api_key <span class="op">=</span> myapikeys.OPENAI_KEY</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>input_audio_filename <span class="op">=</span> <span class="st">&#39;input.wav&#39;</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>output_audio_filename <span class="op">=</span> <span class="st">&#39;chatgpt_response.wav&#39;</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>output_conversation_filename <span class="op">=</span> <span class="st">&#39;ChatGPT_conversation.txt&#39;</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co"># Initialize app</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="cf">if</span> <span class="st">&#39;messages&#39;</span> <span class="kw">not</span> <span class="kw">in</span> st.session_state:</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    st.session_state[<span class="st">&#39;messages&#39;</span>] <span class="op">=</span> [{<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;You are a helpful assistant.&quot;</span>}]</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>st.title(<span class="st">&quot;My awesome personal assistant&quot;</span>)</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>sec <span class="op">=</span> st.slider(<span class="st">&quot;Select number of seconds of recording&quot;</span>, min_value<span class="op">=</span><span class="dv">2</span>, max_value<span class="op">=</span><span class="dv">8</span>, value<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="co"># Record audio + transcribe with Whisper + get GPT3 response</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="cf">if</span> st.button(<span class="st">&#39;Record audio&#39;</span>):</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>    st.write(<span class="st">&quot;Recording...&quot;</span>)</span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>    record_audio(input_audio_filename, sec)</span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a>    transcription <span class="op">=</span> transcribe_audio(input_audio_filename)</span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>    st.write(<span class="ss">f&quot;Me: </span><span class="sc">{</span>transcription[<span class="st">&#39;text&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a>    st.session_state[<span class="st">&#39;messages&#39;</span>].append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: transcription[<span class="st">&#39;text&#39;</span>]})</span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>    bot <span class="op">=</span> openai.ChatCompletion.create(model<span class="op">=</span><span class="st">&quot;gpt-3.5-turbo&quot;</span>, messages<span class="op">=</span>st.session_state[<span class="st">&#39;messages&#39;</span>])</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a>    response <span class="op">=</span> bot.choices[<span class="dv">0</span>].message.content</span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>    st.write(<span class="ss">f&quot;GPT: </span><span class="sc">{</span>response<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a>    save_text_as_audio(response, output_audio_filename)</span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a>    play_audio(output_audio_filename)</span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a>    st.session_state[<span class="st">&#39;messages&#39;</span>].append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;content&quot;</span>: response})</span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a>st.download_button(label<span class="op">=</span><span class="st">&quot;Download conversation&quot;</span>, </span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a>                   data <span class="op">=</span> pd.DataFrame(st.session_state[<span class="st">&#39;messages&#39;</span>]).to_csv(index<span class="op">=</span><span class="va">False</span>).encode(<span class="st">&#39;utf-8&#39;</span>), </span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a>                   file_name<span class="op">=</span>output_conversation_filename)</span></code></pre></div>
<p>Where I added a slider to define the numbers of seconds you want to record, and the possibility of downloading the full conversation at the end.
Also, Iâve used a couple of different functions than in the example above: <code>save_text_as_audio</code> and <code>play_audio</code>. The reason is simply because I couldnât make the <code>say</code> function work on the Streamlit app, probably because of something related to the multiprocessing thing.</p>
<p>You can find all the code <a href="https://github.com/PabloCanovas/chatgpt-whisper-streamlit-voice-assistant">here</a>.</p>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>In this blog post, Iâve shown you how to build a virtual assistant using OpenAI GPT and Whisper APIs. I have taken you through the steps of building an interactive console-based program and a browser-based app using Streamlit.</p>
<p>A possible next step could be deploying the app to the web, maybe on Heroku, AWS or GCP. In case you are going for it, keep me in the loop! Iâd be happy to know this could be useful to anyone.</p>
<p>Happy building!</p>
<p><br></p>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="https://csshake.surge.sh/csshake.min.css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	 #mc_embed_signup .button {
  background-color: #0294A5; /* Green */
  color: white;
  transition-duration: 0.4s;
}
#mc_embed_signup .button:hover {
  background-color: #379392 !important; 
}

</style>
<div id="mc_embed_signup">
<form action="https://typethepipe.us4.list-manage.com/subscribe/post?u=91551f7ed29389a0de4f47665&amp;id=d95c503a48" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
 <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL"> Suscribe for more Python content!</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="your best email" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_91551f7ed29389a0de4f47665_d95c503a48" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Submit!" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->
<style>
.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#2e8516;font-weight:bold}.hljs-comment, .hljs-quote {
    color: #0e847b;
    font-style: italic;
}.hljs-number, .hljs-literal, .hljs-variable, .hljs-template-variable, .hljs-tag .hljs-attr {
    color: #008021;
}
</style>
</div>

              </div>
              







<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/gpt-whisper-build-your-own-voice-assistant/&amp;text=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/gpt-whisper-build-your-own-voice-assistant/&amp;t=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant&amp;body=/post/gpt-whisper-build-your-own-voice-assistant/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/gpt-whisper-build-your-own-voice-assistant/&amp;title=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant%20/post/gpt-whisper-build-your-own-voice-assistant/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/gpt-whisper-build-your-own-voice-assistant/&amp;title=Use%20GPT%20and%20Whisper%20to%20Build%20Your%20Own%20Voice%20Assistant" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="avatar mr-3 avatar-circle" src="/authors/pablo-canovas/pablo-avatar_hu3618d2e81510010302fb07a57440ef4d_624691_270x270_fill_q90_lanczos_center.jpg" alt="Pablo CÃ¡novas">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/pablo-canovas/">Pablo CÃ¡novas</a></h5>
      <h6 class="card-subtitle">Senior Data Scientist at Spotahome</h6>
      <p class="card-text">Data Scientist, formerly physicist  |  Tidyverse believer, piping life  |  Hanging out at TypeThePipe</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/paul_elotro" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/pablo-c%c3%a1novas-tourn%c3%a9-2507b6b7" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/PabloCanovas" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  










  
  


            </div>
        </article>
  

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/python.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

    
    

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms and Conditions</a>
    
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.
	<a href="https://www.r-bloggers.com/">
	<img border="0" alt="R Bloggers icon" src="/img/r_bloggers.png" width="100" height="100">
	</a>
	<br>
	<a href="https://www.python-bloggers.com/">
	<img border="0" alt="Python Bloggers icon" src="/img/python_logo.png" width="100" height="100">
	</a>
    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
  <style>
    #consent-notice {padding: 1rem 1rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: rgba(255,255,255,0.8);}
    #consent-notice span {margin-right: 1rem;}
    #consent-notice button {cursor: pointer; display: inline-block; width: auto;}
    #consent-notice span a {color: inherit; text-decoration: underline; text-decoration-color: rgba(255,255,255,0.5);}
    #consent-notice button.btn {margin-left: 0.5rem;}
    #consent-notice button.btn.manage-consent {background: rgba(255,255,255,0.1); font-weight: normal;}
    
    #consent-overlay {position: fixed; left: 0; top: 0; width: 100%; height: 100vh; display: none; background: rgba(0,0,0,0.75); z-index: 999999; overflow: auto; cursor: pointer;}
    #consent-overlay.active {display: flex;}
    #consent-overlay > div {background: white; width: 100%; max-width: 30rem; padding: 1.75rem; margin: auto; cursor: initial;}
    #consent-overlay > div > div {display: flex; align-items: flex-start; margin-bottom: 1rem;}
    #consent-overlay > div > div:last-child {margin: 0;}
    #consent-overlay h3 {padding-top: 0;}
    #consent-overlay input {margin-top: 0.3rem;}
    #consent-overlay label {display: block;}
    #consent-overlay .btn {margin-right: 0.5rem;}
    #consent-overlay button.btn.save-consent {background: rgba(0,0,0,0.6); font-weight: normal;}

    @media (max-width: 767px) {
        #consent-overlay > div {padding: 1.75rem 1rem;}
        #consent-notice span {display: block; padding-top: 3px; margin-bottom: 1.5rem;}
        #consent-notice button.btn {position: relative; bottom: 4px;}
    }
</style>
<div id="consent-notice"><span>We would like to use <a class="manage-consent" href="#manage-consent">third party code</a> to improve the functionality of this website.</span><button class="btn manage-consent">Manage preferences</button><button class="btn deny-consent">Deny</button><button class="btn approve-consent">Allow</button></div>
<div id="consent-overlay">
    <div>
        
            <div>
                <input type="checkbox" id="item0" value="1" name="item0" checked disabled />
                <label for="item0">
                    <h3>Google Anaytics (functional)</h3>
                    <p>This code gives us insight into the number of anonymized people that visit our website, where they are from and what they are clicking on in order to create better content.</p>
                </label>
            </div>
        
            <div>
                <input type="checkbox" id="item1" value="1" name="item1"  />
                <label for="item1">
                    <h3>Marketing</h3>
                    <p>Marketing pourposes cookies.</p>
                </label>
            </div>
        
        <div>
            <button id="save-consent" class="btn save-consent" data-consentvalue="0">Save preferences</button>
            <button class="btn approve-consent">Allow all</button>
        </div>
    </div>
</div>
<script>

    const scripts = [];
    scripts[ 0 ] = "/js/mkt.js";

    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }
    function denyAllConsentScripts() {
        var consentValue = "";
        scripts.forEach(function(){
            consentValue = consentValue + "0";
        });
        acceptSomeConsentScripts(consentValue);
    }
    function acceptAllConsentScripts() {
        var consentValue = "";
        scripts.forEach(function(){
            consentValue = consentValue + "1";
        });
        acceptSomeConsentScripts(consentValue);
    }
    function acceptSomeConsentScripts(consentValue) {
        setConsentInputs(consentValue);
        createCookie('consent-settings',consentValue,31);
        document.getElementById('consent-notice').style.display = 'none';
        document.getElementById('consent-overlay').classList.remove('active');
        loadConsentScripts(consentValue);
    }
    function loadConsentScripts(consentValue) {
        scripts.forEach(function(value,key){
            
            if(consentValue[key]=="1") {
                var s = document.createElement('script');
                s.type = 'text/javascript';
                s.src = value;
                document.body.appendChild(s);
            }
        });
    }
    function setConsentInputs(consentValue) {
        var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
        elements.forEach(function(el,index) {
            if(consentValue[index]=="1") el.checked = true;
            else el.checked = false;
        });
    }
    function setConsentValue() {
        var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
        var consentValue = "";
        elements.forEach(function(el) {
            if(el.checked) consentValue = consentValue + "1";
            else consentValue = consentValue + "0";
        });
        document.getElementById("save-consent").dataset.consentvalue = consentValue;
    }

    var elements = document.querySelectorAll('#consent-overlay input:not([disabled])');
    elements.forEach(function(el) {
        el.checked = false;
    });

    if(readCookie('consent-settings')) {
        var consentValue = readCookie('consent-settings').toString();
        
        setConsentInputs(consentValue);
        loadConsentScripts(consentValue);
    } else {
        document.getElementById('consent-notice').style.display = 'block';
    }
    var elements = document.querySelectorAll('.manage-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
            document.getElementById('consent-overlay').classList.toggle('active');
        });
    });
    var elements = document.querySelectorAll('.deny-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
            denyAllConsentScripts();
        });
    });
    var elements = document.querySelectorAll('.approve-consent');
    elements.forEach(function(el) {
        el.addEventListener("click",function() {
            acceptAllConsentScripts();
        });
    });
    document.getElementById("save-consent").addEventListener("click",function() {
        setConsentValue();
        acceptSomeConsentScripts(this.dataset.consentvalue);
    });
    document.getElementById("consent-overlay").addEventListener("click",function(e) {
        if (!document.querySelector("#consent-overlay > div").contains(e.target)){
            this.classList.toggle('active');
        }
    });
</script>


    
        <script type="text/javascript" src="/js/ga.js"></script>
    

    

</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
